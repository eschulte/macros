<!DOCTYPE html>
<html>
  <head>
    <title>Macros</title>
    <!-- By Eric Schulte, source at https://github.com/eschulte/macros. -->
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <link rel="manifest" href="/macros/manifest.json" />
    <link rel="icon" href="/macros/icons-192.png" type="image/png" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/macros/w3.css">
    <link rel="icon" href="/macros/favicon.ico">
    <link rel="apple-touch-icon" href="/macros/icon-512.png">
    <link rel="apple-touch-startup-image" href="/macros/icon-512.png">
    <script src="/macros/vega.min.js"></script>
    <script src="/macros/autocomplete.js"></script>
    <script src="/macros/macros.js"></script>
    <script src="/macros/targets.json"></script>
    <script src="/macros/foods.json"></script>
    <script src="/macros/macros-ui.js"></script>
    <style>
      .food:hover { color: red; }
      .download {
          position: fixed;
          top: 20px;
          right: 20px;
      }
      .dead {
          opacity: 0.125;
      }
      .exchange {
          text-decoration: none;
      }
      .network-message {
          display: none;
          font-weight: 200;
          position: fixed;
          top: 20px;
          left: 50%;
          text-align: center;
          font-size: x-small;
      }
      #paste-actuals-container{
          display: none;
          position: absolute;
          top: 5%;
          left: 5%;
          width: 90%;
          z-index: 10;
      }
      #paste-actuals{
          width: 100%;
      }
    </style>
  </head>
<body class="w3-dark-grey w3-text-light-grey-">
  <div class="w3-container">
    <h1 id="today">Today</h1>
<div class="download">
<button><a href="#" class="exchange" id="upload-link" onclick="toggle_actuals_paste(); return false">↧↥</a></button>
</div>
<div class="network-message">
  Network: <span id="network-status" class="">?</span></br>
  Standalone: <span id="standalone-status" class="">?</span></br>
</div>
<div id="paste-actuals-container">
<label for="actuals">Actuals:</label></br>
<textarea id="paste-actuals" name="actuals" autocomplete="off" rows="24"></textarea>
<button type="submit" onClick="add_actuals();return false">Submit</button>
<button type="clear" onClick="toggle_actuals_paste();return false">Clear</button>
</div>
<div class="w3-row-padding">
<div class="w3-half w3-container">
<table id="today-content"></table></br>
<p><label for="add-food">Food:</label>
<input type="text" id="add-food" name="food" autocomplete="off" style="position: relative;">
<button type="submit" onClick="add_food();return false">Add</button></p>
<ul id="foods"></ul>
</div>
<div class="w3-half w3-container" id="view"></div>
</div>
<h1 id="target-calculation">Target calculation</h1>
<p>The instructions I've heard are to:</p>
<ol>
<li>Start with your <em>maintenance calories</em> and then either add or drop
10-20% based on if you're looking more to lose weight or add
muscle, basically based on if you're currently a little over or
under weight.</li>
<li>Then you calculate how much protein you should be consuming daily.
Which for me came to 1.2g/pound.</li>
<li>You want <em>at least</em> (you can do more) 20% of your calories from fat.</li>
<li>I forget how carbs were calculated.</li>
</ol>
<p>So for me this all works out to:</p>
<ul>
<li>Total calories = maintenance - 15% = 2500–2750* 0.85 = 2125—2337 calories</li>
<li>Protein 1.2g/pound = ~220g = 1144 calories</li>
<li>Fat: &gt;= 20% = &gt;=425 calories = 48g</li>
<li>Carbs = &lt;= 556 calories = 139g</li>
</ul>

  </div>
  <script type="text/javascript">
    if (navigator.serviceWorker != null) {
      navigator.serviceWorker.register('sw.js')
        .then(function(registration) {
          console.log('Registered events at scope: ', registration.scope);
        });
    }

    // fetch('./data.json')

    if (navigator.onLine) {
      document.getElementById('network-status').innerText = 'Online'
    } else {
      document.getElementById('network-status').classList = ['is-offline']
      document.getElementById('network-status').innerText = 'Offline'
    }
    if(window.navigator.standalone){
      document.getElementById("standalone-status").innerHTML = "Yes"
    } else {
      document.getElementById("standalone-status").innerHTML = "No"
    }

    local_actuals_up()
    ensure_today()
    update_ui()
    if(document.getElementById("add-food")){
      autocomplete(document.getElementById("add-food"), Object.keys(foods))
    }

    var today = document.getElementById("today");
    today.addEventListener("touchstart", handle_start, false);
    today.addEventListener("touchmove", handle_move("today"), false);
    today.addEventListener("touchcancel", handle_cancel, false);
    today.addEventListener("touchend", handle_end, false);

    var view_div = document.getElementById("view");
    view_div.addEventListener("touchstart", handle_start, false);
    view_div.addEventListener("touchmove", handle_move("view"), false);
    view_div.addEventListener("touchcancel", handle_cancel, false);
    view_div.addEventListener("touchend", handle_end, false);
  </script>
</body>
</html>
